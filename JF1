pipeline {
    agent any

    parameters {
        string(name: 'USERNAME', defaultValue: 'Izhan', description: 'Enter your name')
        choice(name: 'GREETINGS', choices: ['Hi', 'Hello', 'Hey'], description: 'Choose a greeting')
    }

    environment {
        Dir_Name = "GreetingsDir"
    }

    stages {
        stage('Greet') {
            steps {
                echo "${params.GREETINGS} from ${params.USERNAME}"
            }
        }

        stage('Make Directory') {
            steps {
                sh """
                    mkdir -p ${Dir_Name}
                    echo '${params.USERNAME} is creating a directory named ${Dir_Name}' > ${Dir_Name}/Greetings.txt
                """
            }
        }

        stage('Read from a file') {
            steps {
                sh "cat ${Dir_Name}/Greetings.txt"
            }
        }
    }
}
